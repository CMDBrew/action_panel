%dropdown-to-menu {
  &.navbar-dark  .dropdown-item a { color: $yiq-text-light; }
  &.navbar-light .dropdown-item a { color: $yiq-text-dark; }

  .dropdown-toggle {
    &::after { display: none; }

    &::before {
      @extend .dropdown-toggle::after;
      display: inline-block;
      margin-right: map-get($spacers, 1);
    }
  }

  .dropdown-menu {
    position: static !important;
    padding: 0;
    border: 0;

    @include transform(none !important);

    &,
    .dropdown-item:hover {
      background: transparent;
    }

    .dropdown-item {
      padding: 0;
      background: transparent;

      a {
        @extend .nav-link;
        padding-left: 2.5 * $spacer !important;
      }
    }
  }
}

%navigation-sidebar-base {
  $_item-spacer: map-get($spacers, 3);

  position: fixed;
  top: 0;
  bottom: 0;
  left: 0;
  align-items: flex-start;
  flex-direction: column;
  padding: 0;
  overflow: hidden;

  .navbar-nav { width: 100%; }

  .nav-link,
  .navbar-brand {
    padding-right: $_item-spacer;
    padding-left: $_item-spacer;
    white-space: nowrap;
  }

  .navbar-brand {
    width: 100%;
    margin: 0;
  }

  #header-nav {
    display: flex;
    flex: 1;

    &,
    .navbar-nav {
      flex-direction: column;
      width: 100%;
    }
  }

  #main-nav {
    flex: 1;
    overflow-y: auto;
  }
}

%navigation-top-base {
  min-height: $header-fixed-top-height;
  #main-nav { @extend .mr-auto; }
  .dropdown-item a { color: inherit; }
}

%navigation-fixed-top {
  @extend %navigation-top-base;

  position: fixed;
  top: 0;
  right: 0;
  left: 0;
}

%navigation-top {
  @extend %navigation-top-base;
}

%navigation-sidebar {
  @extend %dropdown-to-menu;
  @extend %navigation-sidebar-base;
  display: flex;
  width: $header-sidebar-width;

  @at-root {
    &,
    #title_bar,
    #wrapper {
      @include transition(all 0.2s linear);
    }
  }

  .navbar-brand {
    display: flex;
    align-items: center;
    height: $titlebar-height;
  }

  @include media-breakpoint-down(nth($breakpoints, index($breakpoints, map-get($header-breakpoints, 'top')) - 1)) {
    @include transform(translateX(-100%));
    width: $header-sidebar-md-width;

    &.show {
      @include transform(translateX(0%));

      ~ nav,
      ~ div {
        @include transform(translateX($header-sidebar-md-width));
      }

      @at-root {
        body.header-active { overflow: hidden; }
      }
    }
  }
}

#header {
  @extend #{$header-theme};
  @extend .navbar-expand-#{(nth($breakpoints, index($breakpoints, map-get($header-breakpoints, 'top')) - 1))};
  z-index: $zindex-fixed;

  .nav-item {
    .menu_badge { margin-left: $header-icon-offset;  }

    .nav-link {
      @extend .text-truncate;
      width: 100%;

      & > * {
        display: inline-block;
        vertical-align: middle;
      }
    }

    .aa-icon {
      @extend %streamline-icon;
      @include aa-icon-size($header-icon-size);
      display: inline-block;

      margin-right: $header-icon-offset;
      vertical-align: middle;
      stroke: $header-icon-color;
    }
  }

  .nav-link:hover .aa-icon { stroke: $header-icon-hover-color; }
  .nav-item.active .aa-icon { stroke: $header-icon-active-color; }
}
